/*! npm_api_test 2015-06-02 */
"use strict";angular.module("myApp.directives",[]).directive("masonry",function(a,b){return{restrict:"AC",link:function(a,b,c){b.masonry({itemSelector:".masonry-brick"})},controller:function(a,c){function d(){f||(f=!0,a.$evalAsync(function(){f=!1,c.masonry("reload")}))}var e=[];this.appendBrick=function(a,d,f){function g(){c.masonry("appended",a,!0),0===e.length&&b(function(){c.masonry("resize")});var f=e.indexOf(d);-1===f&&e.push(d)}f?a.imagesLoaded(g):g()};var f=!1;this.removeBrick=function(a){d();var b=e.indexOf(a);-1!=b&&e.splice(b,1)}}}}).directive("masonryBrick",function(a){return{restrict:"AC",require:"^masonry",link:function(a,b,c,d){b.imagesLoaded(function(){d.appendBrick(b,a.$id,!0)}),a.$on("$destroy",function(){d.removeBrick(a.$id)})}}});
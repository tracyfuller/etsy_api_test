/*! npm_api_test 2015-06-04 */
var myApp=angular.module("myApp",[]);myApp.controller("GetApi",["$scope","$http",function(a,b){a.item={},a.sizedArray=[];var c,d,e=function(a){return 2*a.num_favorers+a.views},f=function(a){var b=a.length,c=[],d=[],e=[];for(a.sort(function(a,b){return a.popularity-b.popularity});a.length>b/2;)c.push(a.shift());for(b=a.length;a.length>b/2;)d.push(a.shift());for(b=a.length;a.length>b/3;)e.push(a.shift());for(i=0;i<c.length;i++)c[i].rows="1",c[i].cols="1";for(i=0;i<d.length;i++)d[i].rows="2",d[i].cols="2";for(i=0;i<e.length;i++)e[i].rows="3",e[i].cols="2";for(i=0;i<a.length;i++)a[i].rows="3",a[i].cols="3";for(;c.length>0;)a.push(c.shift());for(;d.length>0;)a.push(d.shift());for(;e.length>0;)a.push(e.shift());return a.sort(function(a,b){return a.id-b.id}),a},g=function(){for(var b=0;b<a.listings.length;b++)a.item.id=b+1,a.item.image=a.listings[b].Images[0].url_570xN,a.item.popularity=e(a.listings[b]),a.item.url=a.listings[b].url,a.sizedArray.push(a.item),a.item={};c=Math.max.apply(Math,a.sizedArray.map(function(a){return a.popularity})),d=Math.min.apply(Math,a.sizedArray.map(function(a){return a.popularity})),f(a.sizedArray)};a.displayListings=function(){return b.get("/etsy").then(function(b){return 200!==b.status&&console.log("Response Error, cannot reach data"),a.listings=b.data.results,console.log(a.listings),g(),b.data})}}]);
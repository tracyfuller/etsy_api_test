/*! npm_api_test 2015-06-02 */
var myApp=angular.module("myApp",["wu.masonry"]);myApp.controller("GetApi",["$scope","$http",function(a,b){a.listings=[{Images:[{url_170x135:"http://www.fillmurray.com/300/300"}],"class":"masonry-brick--height2"},{Images:[{url_170x135:"http://www.fillmurray.com/300/300"}],"class":"masonry-brick--width2"},{Images:[{url_170x135:"http://www.fillmurray.com/300/300"}],"class":""},{Images:[{url_170x135:"http://www.fillmurray.com/300/300"}],"class":""},{Images:[{url_170x135:"http://www.fillmurray.com/300/300"}],"class":"masonry-brick--width2"},{Images:[{url_170x135:"http://www.fillmurray.com/300/300"}],"class":"masonry-brick--height2"},{Images:[{url_170x135:"http://www.fillmurray.com/300/300"}],"class":"masonry-brick--width2"},{Images:[{url_170x135:"http://www.fillmurray.com/300/300"}],"class":""},{Images:[{url_170x135:"http://www.fillmurray.com/300/300"}],"class":""},{Images:[{url_170x135:"http://www.fillmurray.com/300/300"}],"class":"masonry-brick--width2"},{Images:[{url_170x135:"http://www.fillmurray.com/300/300"}],"class":""},{Images:[{url_170x135:"http://www.fillmurray.com/300/300"}],"class":"masonry-brick--width2"},{Images:[{url_170x135:"http://www.fillmurray.com/300/300"}],"class":""},{Images:[{url_170x135:"http://www.fillmurray.com/300/300"}],"class":""},{Images:[{url_170x135:"http://www.fillmurray.com/300/300"}],"class":"masonry-brick--width2"}],a.item={},a.sizedArray=[];var c,d,e=function(a){return 2*a.num_favorers+a.views},f=function(a){var b=a.length,c=[];for(a.sort(function(a,b){return a.popularity-b.popularity}),console.log("Class Builder: ",a);a.length>b/2;)c.push(a.shift());console.log(c),console.log(a)},g=function(){for(var b=0;b<a.listings.length;b++)a.item.id=b+1,a.item.image=a.listings[b].Images[0].url_570xN,a.item.popularity=e(a.listings[b]),a.item.url=a.listings[b].url,a.sizedArray.push(a.item),a.item={};c=Math.max.apply(Math,a.sizedArray.map(function(a){return a.popularity})),d=Math.min.apply(Math,a.sizedArray.map(function(a){return a.popularity})),f(a.sizedArray)};a.displayListings=function(){return b.get("/etsy").then(function(b){return 200!==b.status&&console.log("Response Error, cannot reach data"),a.listings=b.data.results,console.log(a.listings),g(),b.data})}}]);